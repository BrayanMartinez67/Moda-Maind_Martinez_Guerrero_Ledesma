{% extends 'components/base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'Assessment/css/Styles.css' %}">
<link rel="stylesheet" href="{% static 'Assessment/css/evaluacion.css' %}">
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<div class="contenedor-evaluacion">
  <div class="columna-outfit">
    <img id="imagen-subida"
         class="imagen-outfit"
         src="{{ outfit.imagen.url }}"
         data-id="{{ outfit.id }}"
         alt="Tu outfit">
    <button type="button" class="boton-recomendacion" id="obtenerRecomendacionesButton" onclick="obtenerRecomendacion()">Obtener Recomendación</button>
    <button type="button" class="boton-recomendacion" onclick="redirigirEvaluacionDesdeEvaluacion()">Evaluar Outfit</button>
  </div>
  <div class="columna-datos">
    <form method="post" id="form-evaluacion">
      {% csrf_token %}
      <label for="lugar">Lugar</label>
      <option value="" disabled selected>Selecciona un lugar</option>
      <select name="lugar" id="lugar">
      </select>
      <label for="evento">Evento</label>
  <select id="evento" name="evento" disabled>
    <option value="" disabled selected>Selecciona un evento</option>
    
  </select>
      <label for="tipo_cuerpo">Tipo de Cuerpo (opcional)</label>
      <select id="tipo_cuerpo" name="tipo_cuerpo">
        <option value="" disabled selected>Selecciona un tipo de cuerpo</option>
      </select>
      <div id="resultado-reco" style="display: none; margin-top: 20px; padding: 15px; border: 1px solid #ccc; border-radius: 10px;"></div>
    </form>

    <div class="midete-container">
      <button class="boton-recomendacion" onclick="abrirModalMedidas()">Mídete</button>
    </div>
  </div>
</div>
<img src="{% static 'Authentication/image/m.png' %}" class="icono-m-flotante" alt="Logo">
<div class="nota2">
  <strong>Importante:</strong> La foto debe mostrar todo tu cuerpo, de pies a cabeza. Asegúrate de que esté bien iluminada y sin objetos que tapen tu ropa.
</div>
<div id="overlay-popup" style="position: fixed; inset: 0; background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(2px); z-index: 9998; display: none; align-items: center; justify-content: center;">
  <div id="popup-recomendacion" style="background: white; padding: 25px; width: 90%; max-width: 500px; border-radius: 12px; box-shadow: 0 15px 40px rgba(0,0,0,0.3); animation: aparecerPopup 0.4s ease-out forwards; position: relative;">
    <button onclick="cerrarPopup()" style="position: absolute; top: 10px; right: 15px; font-size: 20px; background: none; border: none; cursor: pointer;">&times;</button>
    <div id="contenido-recomendacion"></div>
  </div>
</div>
<div id="modal-medidas" class="modal-medidas" style="display: none;">
  <div class="modal-contenido">
    <button class="cerrar-modal" onclick="cerrarModal()">✖</button>
    <div class="modal-body">
      <div id="imagen-genero" class="modal-imagen"></div>
      <div id="formulario-genero" class="modal-formulario"></div>
    </div>
  </div>
</div>
<script src="{% static 'Assessment/js/medidas_tipodecuerpo.js' %}"></script>
<script src="{% static 'Assessment/js/Recomendacion.js' %}"></script>
{% endblock %}
